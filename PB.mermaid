flowchart TD
    A[程序开始] --> B[包含头文件和库]
    B --> C[定义全局变量和结构体]
    C --> D[进入main函数]
    D --> E[显示主菜单界面]
    E --> F[输出菜单选项]
    F --> G[进入菜单选择循环]
    
    G --> H[用户输入选择]
    H --> I{判断选择}
    
    I -->|选择1| J[调用start函数-开始游戏]
    I -->|选择2| K[调用query函数-查询分数]
    I -->|选择3| L[调用about函数-关于我们]
    I -->|选择4| M[显示游戏规则]
    I -->|选择5| N[调用exit函数-退出程序]
    I -->|其他| O[提示输入错误]
    
    J --> P[初始化游戏环境]
    K --> Q[查询链表中历史分数]
    L --> R[显示项目信息和链接]
    M --> S[显示游戏规则后返回主菜单]
    O --> G
    
    P --> T[调用clearScreen函数]
    T --> U[重置score为0]
    U --> V[隐藏光标]
    V --> W[设置UTF-8编码]
    W --> X[设置随机种子]
    X --> Y[初始化食物、蛇、墙]
    Y --> Z[调用playGame函数]
    
    Z --> AA[进入游戏主循环]
    AA --> BB[显示UI界面]
    BB --> CC[检测按键输入]
    CC --> DD[处理方向控制]
    DD --> EE[移动蛇身]
    EE --> FF{碰撞检测}
    
    FF -->|撞墙| GG[游戏结束]
    FF -->|撞自己| GG
    FF -->|撞陷阱| GG
    FF -->|吃到食物| HH[增加长度和分数]
    
    GG --> II[显示Game Over信息]
    II --> JJ[调用add函数保存分数]
    JJ --> KK[返回主菜单]
    
    HH --> LL[重新生成食物]
    LL --> MM[增加陷阱数量]
    MM --> AA
    
    Q --> NN{判断链表是否为空}
    NN -->|空| OO[提示无记录]
    NN -->|非空| PP[遍历链表显示分数]
    OO --> QQ[返回主菜单]
    PP --> QQ
    
    R --> RR[显示项目信息]
    RR --> SS[等待用户选择链接]
    SS --> TT{选择链接}
    TT -->|1-4| UU[打开对应网站]
    TT -->|其他| QQ
    UU --> SS
    
    KK --> E
    QQ --> E